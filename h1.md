# VirtualBoxin ja Linuxin asennus

### Taustatietoja

Rauta, jota tulen käyttämään tämän kurssin harjoituksissa on muutaman vuoden vanha pöytäkone (kotelo taitaa olla jo reilusti yli 10 vuotta vanha). Tarkemmin speksit alla:
* CPU: AMD Ryzen 9 5900x
* Memeory: 32 GB, 4 x 8G GSkill DDR4
* Motherboard: ASUS ROG STRIX X570-E GAMING
* GPU: ASUS ROG STRIX RTX 2070 OC
* CPU & GPU watercooled with hard tubing
* OS: Windows 11, version 23H2
* Twin monitor setup

### VirtualBox vaihe 1
Ensin asennetaan VirtualBox ja tähän stepit on seuraavat:
1. selaimella hakuun "virtualbox" ja top-tuloksista "Oracle VirtualBox - Downloads"
2. valitaan platform, omalla kohdalla "Windows" ja klikataan "windows installer"-linkkiä ja odotellaan latauksen valmistuminen
3. käynnistetään installeri latauksen valmistuttua ja asennetaan VirtualBox koneelle.

### Linux vaihe 1
Linuxin asentamista varten virtualboxiin tarvitaan .iso-filu. Tässä tehtävässä käytetään Debian distroa. Alla stepit kuinka hommassa edetään:
1. selaimen hakukenttään "debian" ja ensimmäinen hakutulos johtaa https://www.debian.org/index.en.html sivulle.
2. ison "Download"-painikkeen alapuolelta klikataan linkkiä "Other downloads"
3. aukeavalta sivulta valitaan oikean puoleiselta palstalta "Try Debian live..." otsikon alta linkki "Live Xfce"

Tässä kohtaa törmäsin ongelmaan, että latauslinkki ei toiminut. Pikaisen testin jälkeen selvisi, että mitkään suorat latauslinkit eivät toimi tällä hetkellä. Ongelma kierrettiin käyttämällä peilejä:

4. klikataan sivun yläosasta "Download mirrors"
5. osa näistäkin on kokeilu hetkellä alhaalla tai todella vanhentuneita, mutta hakuammunnalla löytyi viimeisin 12.6.0 versio Saksan peilistä https://ftp.gwdg.de/debian-cd/
6. valitaan "12.6.0-live" ja tämän jälkeen "amd64" ja vielä "iso-hybrid"
7. listalta etsitään tiedosto, joka päättyy "...xfce.iso" (tiedoston koko on reilut 3 gigaa) ja klikataan linkkiä, jolloin lataus käynnistyy.

### VirtualBox vaihe 2
1. Käynnistetään VirtualBox ohjelma
2. Valitaan "Machine"-valikosta "New"
3. Klikataan ikkunan alareunasta "Expert mode"
4. Aukeavan ikkunan "Name"-kenttään annetaan nimi virtuaalikoneelle. Jos käytössä on useita virtuaalikoneita, tulee nimi valita niin, että se on helppo tunnistaa, mikä kone on kyseessä.
5. "Folder"-kentän kautta voidaan vaihtaa oletuskansiota, johon VirtualBox asentaa virtuaalikoneen.
6. "ISO image"-kentässä valitaan aiemmin ladattu ISO image.
7. Laitetaan ruksi kohtaan "Skip Unattended Installation", näin toimimalla voidaan varmistaa, että asennettava Linux toimii koneessa ilman itse asennusta. Itse asennus tehdään myöhemmin.
8. "Hardware" kohdassa valitaan muistin ja prosessorin ytimien määrä, joita käytetään virtuaalikoneessa. Omassa tapauksessa muistia laitoin 12 GB ja CPU ytimiä 4.
9. "Hard Disk" kohdassa valitaan "Create a Virtual Hard Disk Now"
10. "Hard Disk file location" kohdassa valitaan kansio, johon virtuaalikone tekee virtuaalisen kovalevyn seklä valitaan kovalevyn koko. Tällä kertaa laitoin 75 gigaa, jotta tila ei lopu ihan heti kesken ja koska koneessani on runsaasti tallennustilaa.
11. Tämän jälkeen klikataan alareunasta "Finish", joka luo virtuaalikoneen:
    ![image](https://github.com/user-attachments/assets/3428ed3f-dcdb-4e3f-a2a1-0c8523a2b264)

### Linux vaihe 2
Seuraavaksi edessä on Virtuaalikoneen käynnistys ja Linuxin asennus. Yllä olevassa kuvassa näkyy asennettu virtuaalikone vasemassa reunassa ja koneen nimen "12.6.0" alla indikointi "Power off". Seuraavaksi käynnistetään virtuaalikone ja asennetaan Linux, kun on todettu ensin Linuxin toimivan virtuaalikoneessa.
1. Valitaan virtuaalikone klikkaamalla sen nimeä, jonka jälkeen käynnistetään se painamalla yläreunassa olevaa vihreää nuolta oikealla, jonka alla lukee "Start".

Törmäsin heti käynnistystä yrittäessä ongelmaan. Käynnistys epäonnistui ja virtuaalikoneen tilaksi muuttui "Aborted" virheilmoituksen kera:

![image](https://github.com/user-attachments/assets/7c912a80-1bc4-42c3-8140-939383a719f7)
Kuvassa myös HWiNFO ongelman selvitystä varten

Pikainen selvitys tekoälyn kautta: ChatGPT, prompt: 
Debian Linuxin asennus VirtualBoxiin aiheuttaa virtuaalikoneen käynnistyksessä virheen:

Not in a hypervisor partition (HVP=0) (VERR_NEM_NOT_AVAILABLE).
AMD-V is disabled in the BIOS (or by the host OS) (VERR_SVM_DISABLED).
Result Code:
E_FAIL (0X80004005)
Component:
ConsoleWrap
Interface:
IConsole {6ac83d89-6ee7-4e33-8ae6-b257b2e81be8}

Chat GPT ehdottaa 4 steppiä ongelman ratkaisemiseksi:
1. Ota AMD-V käyttöön BIOS-asetuksissa
2. Varmista, että Hyper-V ei ole käytössä (Windows)
3. Käytä VirtualBoxin uusinta versiota
4. BIOS-päivitys

Oletan, että VIrtualBoxista on yysin versio käytössä, koska se on juuri asennettu ja asennustiedosto ladattu virallisesta lähteestä. Näin ollen kohta kolme on kunnossa.
Tarkistan seuraavaksi kohdan kaksi, joka vaikuttaa helpoimmailta ehdotetuista vaihtoehdoista. Seuraamalla tekoälyn ohjeita selviää nopeasti, että Hyper-V ei ole käytössä koneessani. Eli ongelma ei ole myöskään siinä.
Tämän jälkeen otan kohdan yksi tarkasteluun. Aukaisen HWiNFO64 ohjelman, joka minulla on asennettuna jo valmiiksi koneellani. Tästä selviää nopeasti, että AMD-V ei ole käytössä. Eli seuraavaksi etsimään kyseistä asetusta BIOSin syövereistä.
   
